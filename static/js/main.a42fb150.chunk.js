(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){var a;!function(n,r){"use strict";void 0===(a=function(){return n.annyang=function(e,t){var n,a=e.SpeechRecognition||e.webkitSpeechRecognition||e.mozSpeechRecognition||e.msSpeechRecognition||e.oSpeechRecognition;if(!a)return null;var r,o,s=[],c={start:[],error:[],end:[],soundstart:[],result:[],resultMatch:[],resultNoMatch:[],errorNetwork:[],errorPermissionBlocked:[],errorPermissionDenied:[]},i=0,u=0,l=!1,h="font-weight: bold; color: #00f;",d=!1,p=!1,f=/\s*\((.*?)\)\s*/g,m=/(\(\?:[^)]+\))\?/g,g=/(\(\?)?:\w+/g,v=/\*\w+/g,w=/[-{}[\]+?.,\\^$|#]/g,b=function(e){return e=e.replace(w,"\\$&").replace(f,"(?:$1)?").replace(g,function(e,t){return t?e:"([^\\s]+)"}).replace(v,"(.*?)").replace(m,"\\s*$1?\\s*"),new RegExp("^"+e+"$","i")},y=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];e.forEach(function(e){e.callback.apply(e.context,n)})},k=function(){return r!==t},O=function(e,t){-1!==e.indexOf("%c")||t?console.log(e,t||h):console.log(e)},S=function(){k()||n.init({},!1)},j=function(e,t,n){s.push({command:e,callback:t,originalPhrase:n}),l&&O("Command successfully loaded: %c"+n,h)},x=function(e){var t;y(c.result,e);for(var n=0;n<e.length;n++){t=e[n].trim(),l&&O("Speech recognized: %c"+t,h);for(var a=0,r=s.length;a<r;a++){var o=s[a],i=o.command.exec(t);if(i){var u=i.slice(1);return l&&(O("command matched: %c"+o.originalPhrase,h),u.length&&O("with parameters",u)),o.callback.apply(this,u),void y(c.resultMatch,t,o.originalPhrase,e)}}}y(c.resultNoMatch,e)};return n={init:function(h){var f=!(arguments.length>1&&arguments[1]!==t)||arguments[1];r&&r.abort&&r.abort(),(r=new a).maxAlternatives=5,r.continuous="http:"===e.location.protocol,r.lang="en-US",r.onstart=function(){p=!0,y(c.start)},r.onsoundstart=function(){y(c.soundstart)},r.onerror=function(e){switch(y(c.error,e),e.error){case"network":y(c.errorNetwork,e);break;case"not-allowed":case"service-not-allowed":o=!1,(new Date).getTime()-i<200?y(c.errorPermissionBlocked,e):y(c.errorPermissionDenied,e)}},r.onend=function(){if(p=!1,y(c.end),o){var e=(new Date).getTime()-i;(u+=1)%10===0&&l&&O("Speech Recognition is repeatedly stopping and starting. See http://is.gd/annyang_restarts for tips."),e<1e3?setTimeout(function(){n.start({paused:d})},1e3-e):n.start({paused:d})}},r.onresult=function(e){if(d)return l&&O("Speech heard, but annyang is paused"),!1;for(var t=e.results[e.resultIndex],n=[],a=0;a<t.length;a++)n[a]=t[a].transcript;x(n)},f&&(s=[]),h.length&&this.addCommands(h)},start:function(e){S(),d=(e=e||{}).paused!==t&&!!e.paused,o=e.autoRestart===t||!!e.autoRestart,e.continuous!==t&&(r.continuous=!!e.continuous),i=(new Date).getTime();try{r.start()}catch(n){l&&O(n.message)}},abort:function(){o=!1,u=0,k()&&r.abort()},pause:function(){d=!0},resume:function(){n.start()},debug:function(){var e=!(arguments.length>0&&arguments[0]!==t)||arguments[0];l=!!e},setLanguage:function(e){S(),r.lang=e},addCommands:function(t){var n;for(var a in S(),t)if(t.hasOwnProperty(a))if("function"===typeof(n=e[t[a]]||t[a]))j(b(a),n,a);else{if(!("object"===typeof n&&n.regexp instanceof RegExp)){l&&O("Can not register command: %c"+a,h);continue}j(new RegExp(n.regexp.source,"i"),n.callback,a)}},removeCommands:function(e){e===t?s=[]:(e=Array.isArray(e)?e:[e],s=s.filter(function(t){for(var n=0;n<e.length;n++)if(e[n]===t.originalPhrase)return!1;return!0}))},addCallback:function(n,a,r){var o=e[a]||a;"function"===typeof o&&c[n]!==t&&c[n].push({callback:o,context:r||this})},removeCallback:function(e,n){var a=function(e){return e.callback!==n};for(var r in c)c.hasOwnProperty(r)&&(e!==t&&e!==r||(c[r]=n===t?[]:c[r].filter(a)))},isListening:function(){return p&&!d},getSpeechRecognizer:function(){return r},trigger:function(e){n.isListening()?(Array.isArray(e)||(e=[e]),x(e)):l&&O(p?"Speech heard, but annyang is paused":"Cannot trigger while annyang is aborted")}}}(n)}.apply(t,[]))||(e.exports=a)}("undefined"!==typeof window?window:this)},21:function(e,t,n){e.exports=n(37)},26:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(19),s=n.n(o),c=(n(26),n(1)),i=n.n(c),u=n(8),l=n(2),h=n(3),d=n(5),p=n(4),f=n(6),m=n(20),g=n.n(m),v=n(13),w=n.n(v),b=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).messageId=0,e.address="",e.password="",e}return Object(f.a)(t,e),Object(h.a)(t,[{key:"connect",value:function(e,t){this.address=e,this.password=t,this.ws=new WebSocket("ws://".concat(e)),this.ws.onopen=this.onOpen.bind(this),this.ws.onmessage=this.onMessage.bind(this),this.ws.onerror=this.onError.bind(this),this.ws.onclose=this.onClose.bind(this)}},{key:"onOpen",value:function(){var e=Object(u.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===this.ws||1!==this.ws.readyState){e.next=6;break}return console.log("Successfully Connected to OBS"),e.next=4,this.send({"request-type":"GetAuthRequired"});case 4:(t=e.sent).authRequired?this.authenticate(t):this.emit("connected");case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onClose",value:function(e){this.emit("error",e)}},{key:"close",value:function(){this.ws&&this.ws.close()}},{key:"onError",value:function(e){this.emit("error",e)}},{key:"onMessage",value:function(e){var t=JSON.parse(e.data);console.log("onmessageeee",t),t["message-id"]?this.emit("messageId-".concat(t["message-id"]),t):this.emit(t["update-type"],t)}},{key:"send",value:function(e){var t=this;return new Promise(function(n,a){var r=t.generateMessageId();e["message-id"]=r,t.once("messageId-".concat(r),function(e){"error"===e.status&&a(e),n(e)}),t.ws.send(JSON.stringify(e))})}},{key:"generateMessageId",value:function(){return String(this.messageId++)}},{key:"authenticate",value:function(){var e=Object(u.a)(i.a.mark(function e(t){var n,a,r,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.salt,a=t.challenge,r=(new w.a.sha256).update(this.password+n).digest("base64"),o=(new w.a.sha256).update(r+a).digest("base64"),e.prev=3,e.next=6,this.send({"request-type":"Authenticate",auth:o});case 6:this.emit("connected"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),this.emit("authfail");case 12:case"end":return e.stop()}},e,this,[[3,9]])}));return function(t){return e.apply(this,arguments)}}()}]),t}(g.a),y=n(12),k=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={host:"localhost",port:"4444",password:""},n.handleChange=function(e){n.setState(Object(y.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){n.props.client.connect("".concat(n.state.host,":").concat(n.state.port),n.state.password),e.preventDefault()},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.error&&r.a.createElement("p",null,this.props.error),this.props.authFail&&r.a.createElement("p",null,"Failed to authenticate"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,"Host:",r.a.createElement("input",{name:"host",type:"text",value:this.state.host,onChange:this.handleChange})),r.a.createElement("label",null,"Port:",r.a.createElement("input",{name:"port",type:"text",value:this.state.port,onChange:this.handleChange})),r.a.createElement("label",null,"Password:",r.a.createElement("input",{name:"password",type:"text",value:this.state.password,onChange:this.handleChange})),r.a.createElement("input",{type:"submit",value:"Submit"})))}}]),t}(a.Component),O=n(14),S=n(11),j=n.n(S),x=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={trigger:"obs",commands:[]},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(j.a){var t=Object(y.a)({hello:function(){alert("Hello world!")}},this.state.trigger+" switch (to) :scene",function(){var t=Object(u.a)(i.a.mark(function t(n){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.client.send({"request-type":"SetCurrentScene","scene-name":n});case 3:a=t.sent,console.log("res",a),console.log("switched scene to",n),a.scene=n,e.setState(function(e){return{commands:[].concat(Object(O.a)(e.commands),[a])}}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),t.t0.scene=n,e.setState(function(e){return{commands:[].concat(Object(O.a)(e.commands),[t.t0])}});case 14:case"end":return t.stop()}},t,null,[[0,10]])}));return function(e){return t.apply(this,arguments)}}());j.a.addCommands(t),j.a.debug(!0),j.a.start()}}},{key:"componentDidUpdate",value:function(){10===this.state.commands.length&&this.setState(function(e){return{commands:e.commands.slice(1)}})}},{key:"render",value:function(){return r.a.createElement("div",{className:"Dashboard"},r.a.createElement("p",null,"Voice control"),this.state.text&&r.a.createElement("h2",null,this.state.text),this.state.commands.map(function(e){return r.a.createElement("p",{key:e["message-id"]},JSON.stringify(e))}))}}]),t}(a.Component),E=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={client:new b,connected:!1,authFail:!1,error:null},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark(function e(){var t=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.state.client.on("connected",function(){t.setState({connected:!0,authFail:!1,error:null})}),this.state.client.on("authfail",function(){t.setState({connected:!1,authFail:!0,error:""})}),this.state.client.on("error",function(e){1006!==e.code?console.log(e):t.setState({error:"Can't connect to websocket",connected:!1})});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.connected?r.a.createElement(x,this.state):r.a.createElement(k,this.state)}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[21,1,2]]]);
//# sourceMappingURL=main.a42fb150.chunk.js.map